import{j as e}from"./ui-BJ93jQot.js";import{a as s,f as u,h as p}from"./vendor-TA_wDYrC.js";import{s as g,x as f,c as h,y as b,z as v}from"./index-BlDEwxQf.js";import{s as j}from"./mockData-0ElwO_P3.js";import"react-toastify";const P=()=>{const[t,o]=s.useState("loading"),[l,d]=s.useState(""),i=u(),[m]=p(),n=m.get("token");return s.useEffect(()=>{(async()=>{try{await j(1e3,2e3);const a=await b(n);if(a.error)throw a.error;const{user:r}=a.data;if(r){const x={nombre_usuario:r.nombre||r.email.split("@")[0],email:r.email,avatar_url:r.avatar_url||`https://i.pravatar.cc/300?u=${r.id}`,rol:"user"},c=await v(r.id,x);if(c.error)throw c.error;o("success"),setTimeout(()=>{i("/login")},3e3)}else throw new Error("No se pudo obtener la información del usuario")}catch(a){console.error("Error en el proceso de verificación:",a),o("error"),d(a.message||"Ha ocurrido un error al verificar tu cuenta. Por favor, inténtalo de nuevo.")}})()},[i,n]),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-black pt-20 pb-12 px-4",children:e.jsxs("div",{className:"max-w-md mx-auto bg-gray-800 rounded-lg shadow-xl overflow-hidden border border-gray-700",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 py-4 px-6",children:e.jsx("h1",{className:"text-white text-xl font-bold text-center",children:"Verificación de Cuenta"})}),e.jsxs("div",{className:"p-6",children:[t==="loading"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(g,{className:"animate-spin text-4xl text-indigo-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Verificando tu cuenta..."})]}),t==="success"&&e.jsxs("div",{className:"bg-green-900/30 border border-green-500 text-green-400 px-4 py-6 rounded flex flex-col items-center",children:[e.jsx(f,{className:"text-4xl text-green-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"¡Cuenta verificada!"}),e.jsx("p",{className:"text-center mb-4",children:"Tu cuenta ha sido verificada correctamente."}),e.jsx("p",{className:"text-center text-gray-400",children:"Serás redirigido a la página de inicio de sesión en unos segundos..."}),e.jsx(Link,{to:"/login",className:"mt-4 px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-md hover:from-indigo-700 hover:to-purple-700 transition-colors",children:"Iniciar sesión ahora"})]}),t==="error"&&e.jsxs("div",{className:"bg-red-900/30 border border-red-500 text-red-400 px-4 py-6 rounded flex flex-col items-center",children:[e.jsx(h,{className:"text-4xl text-red-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error de verificación"}),e.jsx("p",{className:"text-center mb-4",children:l}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mt-2",children:[e.jsx(Link,{to:"/login",className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-md hover:from-indigo-700 hover:to-purple-700 transition-colors",children:"Iniciar sesión"}),e.jsx(Link,{to:"/registro",className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"Volver al registro"})]})]})]})]})})};export{P as default};
