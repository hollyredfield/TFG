import{j as e}from"./ui-BJ93jQot.js";import{i as y,a as n,L as o}from"./vendor-TA_wDYrC.js";import{aT as f,o as b,am as _,ad as w,g as D,a4 as S,aW as E,Z as C}from"./index-BlDEwxQf.js";import{m as l}from"./mockData-0ElwO_P3.js";import"react-toastify";const A=()=>{const{userId:r}=y(),[i,j]=n.useState(null),[d,p]=n.useState(null),[N,x]=n.useState(!0),[u,h]=n.useState(null);return n.useEffect(()=>{r&&(async()=>{try{x(!0);const t=l.users.find(a=>a.id===r);if(!t){h("Usuario no encontrado");return}const m=l.forumThreads.filter(a=>a.user_id===r),g=l.forumPosts.filter(a=>a.user_id===r),v=l.forumVotes.filter(a=>a.item_type==="thread"&&l.forumThreads.some(c=>c.id===a.item_id&&c.user_id===r)||a.item_type==="message"&&l.forumPosts.some(c=>c.id===a.item_id&&c.user_id===r)).reduce((a,c)=>a+c.vote_value,0);j(t),p({threadsCount:m.length,postsCount:g.length,totalVotes:v,reputation:t.reputation||0})}catch(t){console.error("Error fetching user data:",t),h("Error al cargar el perfil del usuario")}finally{x(!1)}})()},[r]),N?e.jsx("div",{className:"container-custom py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Cargando perfil..."})]})})}):u?e.jsxs("div",{className:"container-custom py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(o,{to:"/foro",className:"flex items-center text-primary hover:underline",children:[e.jsx(f,{className:"mr-1"})," Volver al foro"]})}),e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"text-red-500 mr-2"}),e.jsx("p",{className:"text-red-700",children:u})]})})]}):e.jsxs("div",{className:"container-custom py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(o,{to:"/foro",className:"flex items-center text-primary hover:underline",children:[e.jsx(f,{className:"mr-1"})," Volver al foro"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary to-primary-dark p-6 text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-white/20 flex-shrink-0",children:e.jsx("img",{src:i.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(i.name)}&background=0ea5e9&color=fff&size=128`,alt:i.name,className:"w-full h-full object-cover",onError:s=>{s.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(i.name)}&background=0ea5e9&color=fff&size=128`}})}),e.jsxs("div",{className:"ml-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:i.name}),i.location&&e.jsxs("p",{className:"flex items-center mt-2 text-white/80",children:[e.jsx(_,{className:"mr-2"}),i.location]}),i.joinedAt&&e.jsxs("p",{className:"flex items-center mt-1 text-white/80",children:[e.jsx(w,{className:"mr-2"}),"Miembro desde ",new Date(i.joinedAt).toLocaleDateString("es-ES",{year:"numeric",month:"long"})]})]})]})}),e.jsxs("div",{className:"p-6",children:[i.bio&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Acerca de"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:i.bio})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:d.reputation}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-center mt-1",children:[e.jsx(D,{className:"mr-1"})," Reputación"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.threadsCount}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-center mt-1",children:[e.jsx(S,{className:"mr-1"})," Temas"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.postsCount}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-center mt-1",children:[e.jsx(E,{className:"mr-1"})," Respuestas"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:d.totalVotes}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-center mt-1",children:[e.jsx(C,{className:"mr-1"})," Votos"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Actividad Reciente"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Últimos Temas"}),e.jsxs("div",{className:"space-y-2",children:[l.forumThreads.filter(s=>s.user_id===r).sort((s,t)=>new Date(t.created_at)-new Date(s.created_at)).slice(0,3).map(s=>e.jsxs("div",{className:"border-l-4 border-primary pl-4 py-2",children:[e.jsx(o,{to:`/foro/tema/${s.id}`,className:"text-primary hover:underline font-medium",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(s.created_at).toLocaleDateString("es-ES")})]},s.id)),l.forumThreads.filter(s=>s.user_id===r).length===0&&e.jsx("p",{className:"text-gray-500 italic",children:"No ha creado ningún tema aún."})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Últimas Respuestas"}),e.jsxs("div",{className:"space-y-2",children:[l.forumPosts.filter(s=>s.user_id===r).sort((s,t)=>new Date(t.created_at)-new Date(s.created_at)).slice(0,3).map(s=>{const t=l.forumThreads.find(m=>m.id===s.tema_id);return e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[e.jsxs(o,{to:`/foro/tema/${t==null?void 0:t.id}`,className:"text-blue-600 hover:underline font-medium",children:["Re: ",t==null?void 0:t.titulo]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(s.created_at).toLocaleDateString("es-ES")})]},s.id)}),l.forumPosts.filter(s=>s.user_id===r).length===0&&e.jsx("p",{className:"text-gray-500 italic",children:"No ha escrito ninguna respuesta aún."})]})]})]})]})]})]})};export{A as default};
